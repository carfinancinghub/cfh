ðŸ“˜ Component: ValuationLiveFeed.jsxPath: C:\CFH\frontend\src\components\ai\ValuationLiveFeed.jsxSecurity Sensitivity: sensitive: no1. PurposeThe ValuationLiveFeed.jsx component serves as a real-time dashboard for displaying vehicle valuation updates within the Rivers Auction platform. It aims to enhance bidding decisions for various user roles by providing live data streams, identifying potential valuation anomalies, and offering advanced analytical tools for premium users. This component is a key part of the AI Valuation Assistant module.2. Version Historyv1.0.0 (May 20, 2025): Initial release. Features include real-time valuation display, WebSocket integration, basic and advanced anomaly detection, premium heatmap, and error handling.3. Inputs (Props)The component accepts the following props:| Prop Name | Type | Required | Description || auctionId | String | Yes | The unique identifier for the specific auction whose valuation data is being displayed. || userRole | String | Yes | The role of the current user (e.g., 'buyer', 'seller', 'officer'). This may influence displayed information or actions. || isPremium | Boolean | Yes | A flag indicating whether the current user has a premium subscription, unlocking advanced features. |PropTypes Definition (Conceptual - as defined in the component):ValuationLiveFeed.propTypes = {
  auctionId: PropTypes.string.isRequired,
  userRole: PropTypes.string.isRequired,
  isPremium: PropTypes.bool.isRequired,
};

4. OutputsThe component renders a JSX.Element that forms the live valuation dashboard. This includes:A primary display area for current and historical valuation data (rendered via @components/common/ValuationDisplay).Real-time updates to valuation figures.Alerts for detected valuation anomalies.Premium Only: An interactive heatmap for visualizing valuation trends (rendered via @components/common/HeatmapCanvas).Premium Only: A section for displaying advanced anomaly insights.User-friendly error messages in case of data fetching or WebSocket connectivity issues.5. Features5.1. Free Tier FeaturesAccessible to all users:Real-time Valuation Display: Shows the most current valuation for the specified auction, along with a recent history of valuation points. Data is updated live via WebSocket.Basic Anomaly Detection: Identifies and displays alerts for significant deviations in real-time valuation data based on predefined basic rules (e.g., a large percentage swing from the recent average).5.2. Premium Tier FeaturesAccessible only if isPremium prop is true:Interactive Heatmap: Renders a canvas-based heatmap visualizing valuation trends over time or across different data points. This provides a richer graphical insight into valuation dynamics. (Utilizes @components/common/HeatmapCanvas).Advanced Anomaly Insights: Provides more detailed information and potentially configurable rules for anomaly detection. This may involve fetching specific anomaly detection rules from @services/valuation/ValuationService and presenting more nuanced alerts or insights.5.3. Wow++ (Planned Future Features)Cross-Auction Comparisons: Functionality to compare live valuation trends and anomalies for the current auction against other similar or relevant auctions, providing broader market context.6. DependenciesThe ValuationLiveFeed.jsx component relies on the following libraries and internal modules:react: Core library for building the user interface.prop-types: For runtime type checking of props.@components/common/ValuationDisplay: A common component responsible for rendering valuation data points and historical charts/lists.@components/common/HeatmapCanvas: (Premium Feature) A common component responsible for rendering the interactive heatmap visualization on an HTML5 canvas.@services/valuation/ValuationService: A service module for:Fetching initial valuation history (getValuationHistory).Fetching rules for advanced anomaly detection (getAnomalyDetectionRules - Premium).@services/websocket/LiveUpdates: A service module that manages the WebSocket connection to /ws/valuation/live for receiving real-time valuation updates.@utils/logger: A utility module for client-side logging of informational messages, warnings, and errors (e.g., logger.info(), logger.warn(), logger.error()).7. Error Handling & CodesThe component implements error handling for data fetching and WebSocket communication issues. Errors are logged using @utils/logger and user-friendly messages are displayed.E_VALUATION_001_FETCH: "Failed to fetch initial valuation history."Trigger: Occurs if the call to ValuationService.getValuationHistory() fails.User Impact: The component will display an error message like "Failed to load initial valuation data." or "Unable to load valuation history."E_VALUATION_002_WS: "WebSocket connection error for live valuation."Trigger: Occurs if the WebSocket connection established by LiveUpdates.connect('/ws/valuation/live') emits an error event.User Impact: The component will display an error message like "Live updates currently unavailable."8. SG Man Compliance NotesCrown Certified Header: The component file and this documentation include the standard Crown Certified header.@aliases: All internal imports utilize @ aliases as per project standards.Error Logging: Errors are logged with specific codes and descriptive messages.Modularity: The component delegates specific rendering tasks (valuation display, heatmap) and data fetching/WebSocket logic to dedicated services and common components.