ðŸ“˜ Component: PredictiveComparison.jsxPath: C:\CFH\frontend\src\components\ai\PredictiveComparison.jsxSecurity Sensitivity: sensitive: no1. PurposeThe PredictiveComparison.jsx component is designed to provide users (buyers, sellers, officers) within the Rivers Auction platform with a clear side-by-side comparison of AI-predicted auction valuations versus actual valuation outcomes. This tool aims to enhance decision-making, improve transparency in AI model performance, and gather feedback for model refinement.2. Version Historyv1.0.0 (May 20, 2025): Initial release. Features include basic predicted vs. actual display, discrepancy calculation, premium interactive charts, premium anomaly insights based on comparison data, and error handling.3. Inputs (Props)The component accepts the following props:Prop NameTypeRequiredDescriptionauctionIdStringYesThe unique identifier for the specific auction for which the valuation comparison is being displayed.isPremiumBooleanYesA flag indicating whether the current user has a premium subscription, unlocking advanced features like interactive charts and detailed anomaly insights.PropTypes Definition (Conceptual - as defined in the component):PredictiveComparison.propTypes = {
  auctionId: PropTypes.string.isRequired,
  isPremium: PropTypes.bool.isRequired,
};
4. OutputsThe component renders a JSX.Element that forms the predictive vs. actual valuation comparison interface. This includes:Display of the AI-predicted valuation.Display of the actual valuation outcome.Calculated discrepancy percentage between predicted and actual values.Premium Only: Interactive charts visualizing historical comparison trends or other relevant data points.Premium Only: A section for displaying advanced anomaly insights related to the comparison (e.g., if the discrepancy is statistically significant based on premium rules).User-friendly error messages if data fetching fails or data mismatches occur.5. Features5.1. Free Tier FeaturesAccessible to all users:Predicted vs. Actual Valuation Display: Clearly shows the AI-predicted valuation alongside the final actual valuation for the specified auction.Discrepancy Percentage: Calculates and displays the percentage difference between the predicted and actual valuations, highlighting how accurate the prediction was.5.2. Premium Tier FeaturesAccessible only if isPremium prop is true:Interactive Comparison Charts: Renders interactive charts (e.g., using @components/common/InteractiveChart) that might show trends of predicted vs. actual values over time for the specific item type, or other comparative analytics. Users may be able to interact with these charts (e.g., zoom, pan, hover for details).Advanced Anomaly Insights: Provides more detailed insights if the discrepancy between predicted and actual values is considered anomalous based on advanced rules or historical performance. This could involve fetching specific anomaly rules from @services/valuation/ValuationService.5.3. Wow++ (Planned Future Features)Cross-Auction Comparison Data: Functionality to compare the current auction's predicted vs. actual performance against a basket of similar past auctions, providing broader context on model accuracy for specific item categories or market conditions.6. DependenciesThe PredictiveComparison.jsx component relies on the following libraries and internal modules:react: Core library for building the user interface.prop-types: For runtime type checking of props.@components/common/ValuationDisplay: A common component responsible for rendering individual valuation figures (predicted, actual, discrepancy) in a standardized format.@components/common/InteractiveChart: (Premium Feature) A common component used to render interactive charts for visualizing comparison data or trends.@services/valuation/ValuationService: A service module for:Fetching the predicted and actual valuation data for a given auction (getPredictedVsActualValuation).Fetching data for premium comparison charts (getPremiumComparisonChartData - Premium).Fetching rules for advanced comparison anomaly insights (getComparisonAnomalyRules - Premium).@utils/logger: A utility module for client-side logging of informational messages, warnings, and errors (e.g., logger.info(), logger.warn(), logger.error()).7. Error Handling & CodesThe component implements error handling for data fetching issues. Errors are logged using @utils/logger and user-friendly messages are displayed to the user.E_VALUATION_003_COMPARISON_FETCH: "Failed to fetch predictive comparison data."Trigger: Occurs if the call to ValuationService.getPredictedVsActualValuation() (or other primary data fetching calls for this component) fails.User Impact: The component will display an error message like "Error: Failed to load comparison data. Please try again later."E_VALUATION_004_COMPARISON_MISMATCH: "Data mismatch in predictive comparison."Trigger: Conceptually, this error would be logged if the fetched data for predicted or actual valuations is incomplete, malformed, or if there's an internal inconsistency that prevents a valid comparison (e.g., trying to calculate discrepancy with missing price fields). The component aims to handle such cases gracefully by showing "N/A" but might log this error for backend/data integrity tracking.User Impact: The UI might display "N/A" for affected values, and a general error message could be shown if the component cannot render meaningfully.8. SG Man Compliance NotesCrown Certified Header: The component file and this documentation include the standard Crown Certified header.@aliases: All internal imports utilize @ aliases as per project standards.Error Logging: Errors are logged with specific codes and descriptive messages.Modularity: The component focuses on comparison logic and display, delegating data fetching to services and specific UI rendering (like individual values or charts) to common components.Accessibility: ARIA labels are intended for key display elements to improve screen reader compatibility.